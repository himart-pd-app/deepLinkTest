<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>DeepLink Test</title>
    <style>
      body { 
        font-family: -apple-system, BlinkMacSystemFont, sans-serif; 
        padding: 24px; 
        line-height: 1.8; 
        font-size: 16px;
      }
      h2 {
        font-size: 20px;
        margin-bottom: 10px;
      }
      textarea {
        display: block;
        width: 100%;
        box-sizing: border-box;
        padding: 16px;
        margin-top: 16px;
        font-size: 16px;
        border: 2px solid #ccc;
        border-radius: 8px;
        height: 180px;
        resize: vertical;
        line-height: 1.5;
      }
      p {
        margin: 16px 0 4px 0;
      }
      .button-row {
        display: flex;
        gap: 10px;
        margin-top: 2px;
      }
    
      .button-row button {
        flex: 1;
        padding: 12px 0;
        font-size: 14px;
        background: #6f42c1;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }
    
      .button-row button:active {
        opacity: 0.85;
      }
    
      .call-button {
        width: 100%;
        padding: 18px 0;
        margin-top: 20px;
        font-size: 16px;
        background: #0366d6;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }
    
      .call-button:active {
        opacity: 0.85;
      }
    </style>
  </head>
  <body>
  
    <h2>ğŸ“± DeepLink í…ŒìŠ¤íŠ¸ í˜ì´ì§€</h2>
  
    <p>ì•„ë˜ ìŠ¤í‚´ ë˜ëŠ” URLì„ ë„£ê³  ë²„íŠ¼ì„ ëˆŒëŸ¬ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.<br>
    Safari / Chrome / ì¸ì•± ë¸Œë¼ìš°ì €ì—ì„œ <b>window.location.href í˜¸ì¶œ</b> í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
  
    <!-- ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ê°’ ìë™ ì…ë ¥ -->
    <textarea id="scheme" placeholder="urlì´ë‚˜ ìŠ¤í‚¤ë§ˆ ì…ë ¥"></textarea>
  
    <p>ìƒ˜í”Œ ë°ì´í„° ì„¸íŒ…</p>
    <div class="button-row">
      <button onclick="setScheme()">ìŠ¤í‚¤ë§ˆ</button>
      <button onclick="setLMS_P_SHOP()">LMS?P=SHOP</button>
      <button onclick="setLMS_P_SHOP_S()">LMS?P=SHOP_S</button>
    </div>
    <p>ë„ë©”ì¸ ë³€í™˜</p>
    <div class="button-row">
      <button onclick="setSLD('www')">www</button>
      <button onclick="setSLD('secure')">secure</button>
      <button onclick="setSLD('tst')">tst</button>
      <button onclick="setSLD('securetst')">securetst</button>
    </div>
    <div class="button-row">
      <button onclick="setSLD('m')">m</button>
      <button onclick="setSLD('msecure')">msecure</button>
      <button onclick="setSLD('mtst')">mtst</button>
      <button onclick="setSLD('msecuretst')">msecuretst</button>
    </div>
    <button class="call-button" onclick="openScheme()">window.location.href í…ŒìŠ¤íŠ¸</button>
  
    <script>
      function setScheme() {
        document.getElementById("scheme").value =
        "himartapp://https://www.e-himart.co.kr/app/displayPlan/listPlanDetail?spdpNo=12109";
      }
        
      function setLMS_P_SHOP() {
        document.getElementById("scheme").value =
        "https://mtst.e-himart.co.kr/LMS.jsp?P=SHOP&deepUrl=http://m.e-himart.co.kr/app/goods/goodsDetail?goodsNo=0053780342&fromShop=m_enuri&utm_source=enuri&utm_medium=PRICE&utm_campaign=m_enuri&referrer=m_enuri&ch=1762990488671&from=en&pType=&from=";
      }
        
      function setLMS_P_SHOP_S() {
        document.getElementById("scheme").value =
        "https://mtst.e-himart.co.kr/LMS.jsp?P=SHOP_S&deepUrl=http://m.e-himart.co.kr/app/goods/goodsDetail?goodsNo=0053780342&fromShop=m_enuri&utm_source=enuri&utm_medium=PRICE&utm_campaign=m_enuri&referrer=m_enuri&ch=1762990488671&from=en&pType=&from=";
      }
  
      function setSLD(newSLD) {
        const textarea = document.getElementById("scheme");
        let text = textarea.value.trim();
    
        if (!text) {
          const defaultUrl = `https://${newSLD}.e-himart.co.kr/`;
          textarea.value = defaultUrl;
          return;
        }
    
        const urlRegex = /(https?:\/\/)([^\/]+)/i;
        const match = text.match(urlRegex);
    
        if (!match) {
          alert("URL íŒ¨í„´(http/https)ì´ í¬í•¨ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");
          return;
        }
    
        const protocol = match[1];
        const host = match[2];
    
        let parts = host.split(".");
        if (parts.length < 3) {
          alert("í˜¸ìŠ¤íŠ¸ êµ¬ì¡°ê°€ ì˜ˆìƒê³¼ ë‹¤ë¦…ë‹ˆë‹¤.");
          return;
        }
    
        parts[0] = newSLD;
        const newHost = parts.join(".");
        const newText = text.replace(host, newHost);
    
        textarea.value = newText;
      }
  
      function openScheme() {
        const url = document.getElementById('scheme').value.trim();
        if (!url) return alert("URL ë˜ëŠ” ìŠ¤í‚´ì„ ì…ë ¥í•˜ì„¸ìš”.");
        console.log("window.location.href =", url);
        window.location.href = url;
      }
    
      function openByIframe() {
        const url = document.getElementById('scheme').value.trim();
        if (!url) return alert("URL ë˜ëŠ” ìŠ¤í‚´ì„ ì…ë ¥í•˜ì„¸ìš”.");
        console.log("iframe.src =", url);
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = url;
        document.body.appendChild(iframe);
      }
    
      function openAsLink() {
        const url = document.getElementById('scheme').value.trim();
        if (!url) return alert("URL ë˜ëŠ” ìŠ¤í‚´ì„ ì…ë ¥í•˜ì„¸ìš”.");
        const a = document.createElement('a');
        a.href = url;
        a.innerText = "í…ŒìŠ¤íŠ¸ ë§í¬ (í´ë¦­)";
        a.style.display = 'block';
        a.style.fontSize = "22px";
        a.style.marginTop = "16px";
        document.body.appendChild(a);
      }
    </script>
  
  </body>
</html>
